!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.binanceapi=t():e.binanceapi=t()}(self,(function(){return(()=>{var e={696:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},856:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(856),t),s(r(327),t),s(r(574),t),s(r(797),t),s(r(753),t),s(r(198),t),s(r(141),t),s(r(341),t),s(r(409),t),s(r(821),t),s(r(470),t),s(r(581),t)},753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLogger=void 0,t.DefaultLogger={silly:(...e)=>{},debug:(...e)=>{console.log(e)},notice:(...e)=>{console.log(e)},info:(...e)=>{console.info(e)},warning:(...e)=>{console.error(e)},error:(...e)=>{console.error(e)}}},327:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotClient=t.MainClient=void 0;const n=r(821),o=s(r(358));class a extends o.default{constructor(e={},t={}){return super("spot1",e,t),this}getServerTime(e){return i(this,void 0,void 0,(function*(){const t=e||this.getBaseUrlKey(),r=n.getServerTimeEndpoint(t);return(yield this.getForBaseUrl(r,t)).serverTime}))}getSystemStatus(){return this.get("sapi/v1/system/status")}getBalances(){return this.getPrivate("sapi/v1/capital/config/getall")}getDailyAccountSnapshot(e){return this.getPrivate("sapi/v1/accountSnapshot",e)}disableFastWithdrawSwitch(){return this.postPrivate("sapi/v1/account/disableFastWithdrawSwitch")}enableFastWithdrawSwitch(){return this.postPrivate("sapi/v1/account/enableFastWithdrawSwitch")}withdraw(e){return this.postPrivate("sapi/v1/capital/withdraw/apply",e)}getDepositHistory(e){return this.getPrivate("sapi/v1/capital/deposit/hisrec",e)}getWithdrawHistory(e){return this.getPrivate("sapi/v1/capital/withdraw/history",e)}getDepositAddress(e){return this.getPrivate("sapi/v1/capital/deposit/address",e)}getAccountStatus(){return this.getPrivate("sapi/v1/account/status")}getDustLog(e){return this.getPrivate("sapi/v1/asset/dribblet",e)}convertDustToBnb(e){return this.postPrivate("sapi/v1/asset/dust",e)}getAssetDividendRecord(e){return this.getPrivate("sapi/v1/asset/assetDividend",e)}getAssetDetail(e){return this.getPrivate("sapi/v1/asset/assetDetail",e)}getTradeFee(e){return this.getPrivate("sapi/v1/asset/tradeFee",e)}submitUniversalTransfer(e){return this.postPrivate("sapi/v1/asset/transfer",e)}getUniversalTransferHistory(e){return this.getPrivate("sapi/v1/asset/transfer",e)}getApiTradingStatus(){return this.getPrivate("sapi/v1/account/apiTradingStatus")}getApiKeyPermissions(){return this.getPrivate("sapi/v1/account/apiRestrictions")}createVirtualSubAccount(e){return this.postPrivate("sapi/v1/sub-account/virtualSubAccount",e)}getSubAccountList(e){return this.getPrivate("sapi/v1/sub-account/list",e)}getSubAccountSpotAssetTransferHistory(e){return this.getPrivate("sapi/v1/sub-account/sub/transfer/history",e)}getSubAccountFuturesAssetTransferHistory(e){return this.getPrivate("sapi/v1/sub-account/futures/internalTransfer",e)}subAccountFuturesAssetTransfer(e){return this.postPrivate("sapi/v1/sub-account/futures/internalTransfer",e)}getSubAccountAssets(e){return this.getPrivate("sapi/v3/sub-account/assets",e)}getSubAccountSpotAssetsSummary(e){return this.getPrivate("sapi/v1/sub-account/spotSummary",e)}getSubAccountDepositAddress(e){return this.getPrivate("sapi/v1/capital/deposit/subAddress",e)}getSubAccountDepositHistory(e){return this.getPrivate("sapi/v1/capital/deposit/subHisrec",e)}getSubAccountStatusOnMarginOrFutures(e){return this.getPrivate("sapi/v1/sub-account/status",e)}subAccountEnableMargin(e){return this.postPrivate("sapi/v1/sub-account/margin/enable",{email:e})}getSubAccountDetailOnMarginAccount(e){return this.getPrivate("sapi/v1/sub-account/margin/account",{email:e})}getSubAccountsSummaryOfMarginAccount(){return this.getPrivate("sapi/v1/sub-account/margin/accountSummary")}subAccountEnableFutures(e){return this.postPrivate("sapi/v1/sub-account/futures/enable",{email:e})}getSubAccountFuturesAccountDetail(e){return this.getPrivate("sapi/v1/sub-account/futures/account",{email:e})}getSubAccountFuturesAccountSummary(){return this.getPrivate("sapi/v1/sub-account/futures/accountSummary")}getSubAccountFuturesPositionRisk(e){return this.getPrivate("sapi/v1/sub-account/futures/positionRisk",{email:e})}subAccountFuturesTransfer(e){return this.postPrivate("sapi/v1/sub-account/futures/transfer",e)}subAccountMarginTransfer(e){return this.postPrivate("sapi/v1/sub-account/margin/transfer",e)}subAccountTransferToSameMaster(e){return this.postPrivate("sapi/v1/sub-account/transfer/subToSub",e)}subAccountTransferToMaster(e){return this.postPrivate("sapi/v1/sub-account/transfer/subToMaster",e)}subAccountTransferHistory(e){return this.getPrivate("sapi/v1/sub-account/transfer/subUserHistory",e)}subAccountUniversalTransfer(e){return this.postPrivate("sapi/v1/sub-account/universalTransfer",e)}getSubAccountUniversalTransferHistory(e){return this.getPrivate("sapi/v1/sub-account/universalTransfer",e)}getSubAccountDetailOnFuturesAccountV2(e){return this.getPrivate("sapi/v2/sub-account/futures/account",e)}getSubAccountSummaryOnFuturesAccountV2(e){return this.getPrivate("sapi/v2/sub-account/futures/accountSummary",e)}getSubAccountFuturesPositionRiskV2(e){return this.getPrivate("sapi/v2/sub-account/futures/positionRisk",e)}subAccountEnableLeverageToken(e){return this.postPrivate("sapi/v1/sub-account/blvt/enable",e)}subAccountEnableOrDisableIPRestriction(e){return this.postPrivate("sapi/v1/sub-account/subAccountApi/ipRestriction",e)}subAccountAddIPList(e){return this.postPrivate("sapi/v1/sub-account/subAccountApi/ipRestriction/ipList",e)}getSubAccountIPRestriction(e){return this.getPrivate("sapi/v1/sub-account/subAccountApi/ipRestriction",e)}subAccountDeleteIPList(e){return this.deletePrivate("sapi/v1/sub-account/subAccountApi/ipRestriction/ipList",e)}depositAssetsIntoManagedSubAccount(e){return this.postPrivate("sapi/v1/managed-subaccount/deposit",e)}getManagedSubAccountAssetDetails(e){return this.getPrivate("sapi/v1/managed-subaccount/asset",{email:e})}withdrawAssetsFromManagedSubAccount(e){return this.postPrivate("sapi/v1/managed-subaccount/withdraw",e)}getBrokerIfNewSpotUser(){return this.getPrivate("sapi/v1/apiReferral/ifNewUser")}getBrokerUserCustomisedId(e){const t="spot"===e?"sapi":"fapi";return this.getPrivate(t+"/v1/apiReferral/userCustomization")}getBrokerSpotRebateHistory(e,t){return 7===e?this.getPrivate("sapi/v1/apiReferral/rebate/recentRecord",{customerId:t}):30===e?this.getPrivate("sapi/v1/apiReferral/rebate/historicalRecord",{customerId:t}):void 0}testConnectivity(){return this.get("api/v3/ping")}getExchangeInfo(e){const t=(null==e?void 0:e.symbols)&&JSON.stringify(e.symbols),r=null==e?void 0:e.symbol;let i="";return r?i+="?symbol="+r:t&&(i+="?"+t),this.get("api/v3/exchangeInfo"+i)}getOrderBook(e){return this.get("api/v3/depth",e)}getRecentTrades(e){return this.get("api/v3/trades",e)}getHistoricalTrades(e){return this.getPrivate("api/v3/historicalTrades",e)}getAggregateTrades(e){return this.get("api/v3/aggTrades",e)}getKlines(e){return this.get("api/v3/klines",e)}getAvgPrice(e){return this.get("api/v3/avgPrice",e)}get24hrChangeStatististics(e){return(null==e?void 0:e.symbol)?this.get("api/v3/ticker/24hr",e):this.get("api/v3/ticker/24hr")}getSymbolPriceTicker(e){return this.get("api/v3/ticker/price",e)}getSymbolOrderBookTicker(e){return this.get("api/v3/ticker/bookTicker",e)}testNewOrder(e){return this.validateOrderId(e,"newClientOrderId"),this.postPrivate("api/v3/order/test",e)}submitNewOrder(e){return this.validateOrderId(e,"newClientOrderId"),this.postPrivate("api/v3/order",e)}cancelOrder(e){return this.deletePrivate("api/v3/order",e)}cancelAllSymbolOrders(e){return this.deletePrivate("api/v3/openOrders",e)}getOrder(e){return this.getPrivate("api/v3/order",e)}getOpenOrders(e){return this.getPrivate("api/v3/openOrders",e)}getAllOrders(e){return this.getPrivate("api/v3/allOrders",e)}submitNewOCO(e){return this.validateOrderId(e,"listClientOrderId"),this.validateOrderId(e,"limitClientOrderId"),this.validateOrderId(e,"stopClientOrderId"),this.postPrivate("api/v3/order/oco",e)}cancelOCO(e){return this.validateOrderId(e,"newClientOrderId"),this.deletePrivate("api/v3/orderList",e)}getOCO(e){return this.getPrivate("api/v3/orderList",e)}getAllOCO(e){return this.getPrivate("api/v3/allOrderList",e)}getAllOpenOCO(){return this.getPrivate("api/v3/openOrderList")}getAccountInformation(){return this.getPrivate("api/v3/account")}getAccountTradeList(e){return this.getPrivate("api/v3/myTrades",e)}crossMarginAccountTransfer(e){return this.postPrivate("sapi/v1/margin/transfer",e)}marginAccountBorrow(e){return this.postPrivate("sapi/v1/margin/loan",e)}marginAccountRepay(e){return this.postPrivate("sapi/v1/margin/repay",e)}queryMarginAsset(e){return this.get("sapi/v1/margin/asset",e)}queryCrossMarginPair(e){return this.get("sapi/v1/margin/pair",e)}getAllMarginAssets(){return this.get("sapi/v1/margin/allAssets")}getAllCrossMarginPairs(){return this.get("sapi/v1/margin/allPairs")}queryMarginPriceIndex(e){return this.get("sapi/v1/margin/priceIndex",e)}marginAccountNewOrder(e){return this.validateOrderId(e,"newClientOrderId"),this.postPrivate("sapi/v1/margin/order",e)}marginAccountCancelOrder(e){return this.deletePrivate("sapi/v1/margin/order",e)}marginAccountCancelOpenOrders(e){return this.deletePrivate("sapi/v1/margin/openOrders",e)}queryLoanRecord(e){return this.getPrivate("sapi/v1/margin/loan",e)}queryRepayRecord(e){return this.getPrivate("sapi/v1/margin/repay",e)}queryCrossMarginAccountDetails(){return this.getPrivate("sapi/v1/margin/account")}queryMarginAccountOrder(e){return this.getPrivate("sapi/v1/margin/order",e)}queryMarginAccountOpenOrders(e){return this.getPrivate("sapi/v1/margin/openOrders",e)}queryMarginAccountAllOrders(e){return this.getPrivate("sapi/v1/margin/allOrders",e)}marginAccountNewOCO(e){return this.validateOrderId(e,"listClientOrderId"),this.validateOrderId(e,"limitClientOrderId"),this.validateOrderId(e,"stopClientOrderId"),this.postPrivate("sapi/v1/margin/order/oco",e)}marginAccountCancelOCO(e){return this.validateOrderId(e,"newClientOrderId"),this.deletePrivate("sapi/v1/margin/orderList",e)}queryMarginAccountOCO(e){return this.getPrivate("sapi/v1/margin/orderList",e)}queryMaxBorrow(e){return this.getPrivate("sapi/v1/margin/maxBorrowable",e)}queryMaxTransferOutAmount(e){return this.getPrivate("sapi/v1/margin/maxTransferable",e)}isolatedMarginAccountTransfer(e){return this.postPrivate("sapi/v1/margin/isolated/transfer",e)}getSpotUserDataListenKey(){return this.post("api/v3/userDataStream")}keepAliveSpotUserDataListenKey(e){return this.put(`api/v3/userDataStream?listenKey=${e}`)}closeSpotUserDataListenKey(e){return this.delete(`api/v3/userDataStream?listenKey=${e}`)}getMarginUserDataListenKey(){return this.post("sapi/v1/userDataStream")}keepAliveMarginUserDataListenKey(e){return this.put(`sapi/v1/userDataStream?listenKey=${e}`)}closeMarginUserDataListenKey(e){return this.delete(`sapi/v1/userDataStream?listenKey=${e}`)}getIsolatedMarginUserDataListenKey(e){return this.post(`sapi/v1/userDataStream/isolated?${n.serialiseParams(e)}`)}keepAliveIsolatedMarginUserDataListenKey(e){return this.put(`sapi/v1/userDataStream/isolated?${n.serialiseParams(e)}`)}closeIsolatedMarginUserDataListenKey(e){return this.delete(`sapi/v1/userDataStream/isolated?${n.serialiseParams(e)}`)}validateOrderId(e,t){const r="spot";if(!e[t])return void(e[t]=n.generateNewOrderId(r));const i=`x-${n.getOrderIdPrefix(r)}`;e[t].startsWith(i)||n.logInvalidOrderId(t,i,e)}}t.MainClient=a,t.SpotClient=a},198:(e,t)=>{"use strict";var r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPositionMarginChangeType=t.EnumMultiAssetMode=t.EnumDualSideMode=void 0,(s=t.EnumDualSideMode||(t.EnumDualSideMode={})).HedgeMode="true",s.OneWayMode="false",(i=t.EnumMultiAssetMode||(t.EnumMultiAssetMode={})).MultiAssetsMode="true",i.SingleAssetsMode="false",(r=t.EnumPositionMarginChangeType||(t.EnumPositionMarginChangeType={}))[r.AddPositionMargin=1]="AddPositionMargin",r[r.ReducePositionMargin=0]="ReducePositionMargin"},141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},341:(e,t)=>{"use strict";var r,i,s,n;Object.defineProperty(t,"__esModule",{value:!0}),t.EnumUniversalTransferType=t.EnumWithdrawTransferType=t.EnumWithdrawStatus=t.EnumDepositStatus=void 0,(n=t.EnumDepositStatus||(t.EnumDepositStatus={}))[n.Pending=0]="Pending",n[n.CreditedButCannotWithdraw=6]="CreditedButCannotWithdraw",n[n.Success=1]="Success",(s=t.EnumWithdrawStatus||(t.EnumWithdrawStatus={}))[s.EmailSent=0]="EmailSent",s[s.Cancelled=1]="Cancelled",s[s.AwaitingApproval=2]="AwaitingApproval",s[s.Rejected=3]="Rejected",s[s.Processing=4]="Processing",s[s.Failure=5]="Failure",s[s.Completed=6]="Completed",(i=t.EnumWithdrawTransferType||(t.EnumWithdrawTransferType={}))[i.External=0]="External",i[i.Interal=1]="Interal",(r=t.EnumUniversalTransferType||(t.EnumUniversalTransferType={})).SpotToC2C="MAIN_C2C",r.SpotToUSDM="MAIN_UMFUTURE",r.SpotToCOINM="MAIN_CMFUTURE",r.SpotToMargin="MAIN_MARGIN",r.SpotToMining="MAIN_MINING",r.C2CToSpot="C2C_MAIN",r.C2CToUSDM="C2C_UMFUTURE",r.C2CToMining="C2C_MINING",r.C2CToMargin="C2C_MARGIN",r.USDMToSpot="UMFUTURE_MAIN",r.USDMToC2C="UMFUTURE_C2C",r.USDMToMargin="UMFUTURE_MARGIN",r.COINMToSpot="CMFUTURE_MAIN",r.COINMToMargin="CMFUTURE_MARGIN",r.MarginToSpot="MARGIN_MAIN",r.MarginToUSDM="MARGIN_UMFUTURE",r.MarginToCOINM="MARGIN_CMFUTURE",r.MarginToMining="MARGIN_MINING",r.MarginToC2C="MARGIN_C2C",r.MiningToSpot="MINING_MAIN",r.MiningToUSDM="MINING_UMFUTURE",r.MiningToC2C="MINING_C2C",r.MiningToMargin="MINING_MARGIN",r.SpotToPay="MAIN_PAY",r.PayToSpot="PAY_MAIN"},409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},574:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.USDMClient=void 0;const n=r(821),o=s(r(358));class a extends o.default{constructor(e={},t={},r){const i=r?"usdmtest":"usdm";return super(i,e,t),this.clientId=i,this}getServerTime(){return i(this,void 0,void 0,(function*(){return this.get(n.getServerTimeEndpoint(this.clientId)).then((e=>e.serverTime))}))}testConnectivity(){return this.get("fapi/v1/ping")}getExchangeInfo(){return this.get("fapi/v1/exchangeInfo")}getOrderBook(e){return this.get("fapi/v1/depth",e)}getRecentTrades(e){return this.get("fapi/v1/trades",e)}getHistoricalTrades(e){return this.get("fapi/v1/historicalTrades",e)}getAggregateTrades(e){return this.get("fapi/v1/aggTrades",e)}getKlines(e){return this.get("fapi/v1/klines",e)}getContinuousContractKlines(e){return this.get("fapi/v1/continuousKlines",e)}getIndexPriceKlines(e){return this.get("fapi/v1/indexPriceKlines",e)}getMarkPriceKlines(e){return this.get("fapi/v1/markPriceKlines",e)}getMarkPrice(e){return this.get("fapi/v1/premiumIndex",e)}getFundingRateHistory(e){return this.get("fapi/v1/fundingRate",e)}get24hrChangeStatististics(e){return this.get("fapi/v1/ticker/24hr",e)}getSymbolPriceTicker(e){return this.get("fapi/v1/ticker/price",e)}getSymbolOrderBookTicker(e){return this.get("fapi/v1/ticker/bookTicker",e)}getOpenInterest(e){return this.get("fapi/v1/openInterest",e)}getOpenInterestStatistics(e){return this.get("futures/data/openInterestHist",e)}getTopTradersLongShortAccountRatio(e){return this.get("futures/data/topLongShortAccountRatio",e)}getTopTradersLongShortPositionRatio(e){return this.get("futures/data/topLongShortPositionRatio",e)}getGlobalLongShortAccountRatio(e){return this.get("futures/data/globalLongShortAccountRatio",e)}getTakerBuySellVolume(e){return this.get("futures/data/takerlongshortRatio",e)}getHistoricalBlvtNavKlines(e){return this.get("fapi/v1/lvtKlines",e)}getCompositeSymbolIndex(e){return this.get("fapi/v1/indexInfo",e)}setPositionMode(e){return this.postPrivate("fapi/v1/positionSide/dual",e)}getCurrentPositionMode(){return this.getPrivate("fapi/v1/positionSide/dual")}setMultiAssetsMode(e){return this.postPrivate("fapi/v1/multiAssetsMargin",e)}getMultiAssetsMode(){return this.getPrivate("fapi/v1/multiAssetsMargin")}submitNewOrder(e){return this.validateOrderId(e,"newClientOrderId"),this.postPrivate("fapi/v1/order",e)}submitMultipleOrders(e){const t={batchOrders:`[${e.map((e=>{const t=Object.assign({},e);return this.validateOrderId(t,"newClientOrderId"),JSON.stringify(t)})).join(",")}]`};return this.postPrivate("fapi/v1/batchOrders",t)}getOrder(e){return this.getPrivate("fapi/v1/order",e)}cancelOrder(e){return this.deletePrivate("fapi/v1/order",e)}cancelAllOpenOrders(e){return this.deletePrivate("fapi/v1/allOpenOrders",e)}cancelMultipleOrders(e){return this.deletePrivate("fapi/v1/batchOrders",e)}setCancelOrdersOnTimeout(e){return this.postPrivate("fapi/v1/countdownCancelAll",e)}getCurrentOpenOrder(e){return this.getPrivate("fapi/v1/openOrder",e)}getAllOpenOrders(e){return this.getPrivate("fapi/v1/openOrders",e)}getAllOrders(e){return this.getPrivate("fapi/v1/allOrders",e)}getBalance(){return this.getPrivate("fapi/v2/balance")}getAccountInformation(){return this.getPrivate("fapi/v2/account")}setLeverage(e){return this.postPrivate("fapi/v1/leverage",e)}setMarginType(e){return this.postPrivate("fapi/v1/marginType",e)}setIsolatedPositionMargin(e){return this.postPrivate("fapi/v1/positionMargin",e)}getPositionMarginChangeHistory(e){return this.getPrivate("fapi/v1/positionMargin/history",e)}getPositions(e){return this.getPrivate("fapi/v2/positionRisk",e)}getAccountTrades(e){return this.getPrivate("fapi/v1/userTrades",e)}getIncomeHistory(e){return this.getPrivate("fapi/v1/income",e)}getNotionalAndLeverageBrackets(e){return this.getPrivate("fapi/v1/leverageBracket",e)}getADLQuantileEstimation(e){return this.getPrivate("fapi/v1/adlQuantile",e)}getForceOrders(e){return this.getPrivate("fapi/v1/forceOrders",e)}getApiQuantitativeRulesIndicators(e){return this.getPrivate("fapi/v1/apiTradingStatus",e)}getAccountComissionRate(e){return this.getPrivate("fapi/v1/commissionRate",e)}getBrokerIfNewFuturesUser(e,t=1){return this.getPrivate("fapi/v1/apiReferral/ifNewUser",{brokerId:e,type:t})}setBrokerCustomIdForClient(e,t){return this.postPrivate("fapi/v1/apiReferral/customization",{customerId:e,email:t})}getBrokerClientCustomIds(e,t,r,i){return this.getPrivate("fapi/v1/apiReferral/customization",{customerId:e,email:t,page:r,limit:i})}getBrokerUserCustomId(e){return this.getPrivate("fapi/v1/apiReferral/userCustomization",{brokerId:e})}getBrokerRebateDataOverview(e=1){return this.getPrivate("fapi/v1/apiReferral/overview",{type:e})}getBrokerUserTradeVolume(e=1,t,r,i){return this.getPrivate("fapi/v1/apiReferral/tradeVol",{type:e,startTime:t,endTime:r,limit:i})}getBrokerRebateVolume(e=1,t,r,i){return this.getPrivate("fapi/v1/apiReferral/rebateVol",{type:e,startTime:t,endTime:r,limit:i})}getBrokerTradeDetail(e=1,t,r,i){return this.getPrivate("fapi/v1/apiReferral/traderSummary",{type:e,startTime:t,endTime:r,limit:i})}getFuturesUserDataListenKey(){return this.post("fapi/v1/listenKey")}keepAliveFuturesUserDataListenKey(){return this.put("fapi/v1/listenKey")}closeFuturesUserDataListenKey(){return this.delete("fapi/v1/listenKey")}validateOrderId(e,t){const r=this.clientId;if(!e[t])return void(e[t]=n.generateNewOrderId(r));const i=`x-${n.getOrderIdPrefix(r)}`;e[t].startsWith(i)||n.logInvalidOrderId(t,i,e)}}t.USDMClient=a},358:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(868)),o=r(821),a=s(r(249));t.default=class{constructor(e,t={},r={}){if(this.timeOffset=0,this.options=Object.assign({recvWindow:5e3,syncIntervalMs:36e5,strictParamValidation:!1},t),this.globalRequestOptions=Object.assign({timeout:3e5,headers:{}},r),this.key=t.api_key,this.secret=t.api_secret,this.key&&(this.globalRequestOptions.headers["X-MBX-APIKEY"]=this.key),this.baseUrlKey=this.options.baseUrlKey||e,this.baseUrl=o.getRestBaseUrl(this.baseUrlKey,this.options),this.key&&!this.secret)throw new Error("API Key & Secret are both required for private enpoints");!0!==this.options.disableTimeSync&&(this.syncTime(),setInterval(this.syncTime.bind(this),+this.options.syncIntervalMs)),this.options.beautifyResponses&&(this.beautifier=new a.default),this.syncTimePromise=null,this.apiLimitTrackers={"x-mbx-used-weight":0,"x-mbx-used-weight-1m":0,"x-sapi-used-ip-weight-1m":0,"x-mbx-order-count-1s":0,"x-mbx-order-count-1m":0,"x-mbx-order-count-1h":0,"x-mbx-order-count-1d":0}}getBaseUrlKey(){return this.baseUrlKey}getRateLimitStates(){return Object.assign(Object.assign({},this.apiLimitTrackers),{lastUpdated:this.apiLimitLastUpdated})}getTimeOffset(){return this.timeOffset}setTimeOffset(e){this.timeOffset=e}get(e,t){return this._call("GET",e,t)}getForBaseUrl(e,t,r){const i=o.getRestBaseUrl(t,{});return this._call("GET",e,r,!1,i)}getPrivate(e,t){return this._call("GET",e,t,!0)}post(e,t){return this._call("POST",e,t)}postPrivate(e,t){return this._call("POST",e,t,!0)}put(e,t){return this._call("PUT",e,t)}putPrivate(e,t){return this._call("PUT",e,t,!0)}delete(e,t){return this._call("DELETE",e,t)}deletePrivate(e,t){return this._call("DELETE",e,t,!0)}_call(e,t,r,s,a){return i(this,void 0,void 0,(function*(){const i=Date.now()+(this.getTimeOffset()||0);if(s&&(!this.key||!this.secret))throw new Error("Private endpoints require api and private keys to be set");const{serialisedParams:c,signature:u,requestBody:l}=yield o.getRequestSignature(r,this.key,this.secret,this.options.recvWindow,i,this.options.strictParamValidation),d=a||this.baseUrl,p=Object.assign(Object.assign({},this.globalRequestOptions),{url:[d,t].join("/"),method:e,json:!0});return s?p.url+="?"+[c,"signature="+u].join("&"):"GET"===e||"DELETE"===e?p.params=r:p.data=o.serialiseParams(l,this.options.strictParamValidation,!0),n.default(p).then((e=>{if(this.updateApiLimitState(e.headers,p.url),200==e.status)return e.data;throw e})).then((e=>{if(!this.options.beautifyResponses||!this.beautifier)return e;try{return this.beautifier.beautify(e,t)||e}catch(t){console.error("BaseRestClient response beautify failed: ",JSON.stringify({response:e,error:t}))}return e})).catch((e=>this.parseException(e,p.url)))}))}parseException(e,t){var r,i;const{response:s,request:n,message:o}=e;if(s&&s.headers&&this.updateApiLimitState(s.headers,t),!1===this.options.parseExceptions)throw e;if(!s){if(!n)throw o;throw e}throw{code:null===(r=s.data)||void 0===r?void 0:r.code,message:null===(i=s.data)||void 0===i?void 0:i.msg,body:s.data,headers:s.headers,requestUrl:t,requestBody:n.body,requestOptions:Object.assign(Object.assign({},this.options),{api_key:void 0,api_secret:void 0})}}updateApiLimitState(e,t){const r={};for(const t in this.apiLimitTrackers){const i=e[t],s=parseInt(i);void 0===i||isNaN(s)?r[t]={updated:!1,valueParsed:s,valueRaw:i}:(this.apiLimitTrackers[t]=s,r[t]={updated:!0,valueParsed:s,valueRaw:i})}this.apiLimitLastUpdated=(new Date).getTime()}syncTime(){return!0===this.options.disableTimeSync?Promise.resolve():(null!==this.syncTimePromise||(this.syncTimePromise=this.fetchTimeOffset().then((e=>{this.timeOffset=e,this.syncTimePromise=null}))),this.syncTimePromise)}fetchTimeOffset(){return i(this,void 0,void 0,(function*(){try{const e=Date.now(),t=yield this.getServerTime(),r=Date.now(),i=(r-e)/2;return Math.ceil(t-r+i)}catch(e){return console.error("Failed to fetch get time offset: ",e),0}}))}}},470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(797),s=r(753);t.default=class{constructor(e){this.logger=e||s.DefaultLogger,this.wsState={}}get(e,t){return this.wsState[e]?this.wsState[e]:t?this.create(e):void 0}getKeys(){return Object.keys(this.wsState)}create(e){return this.hasExistingActiveConnection(e)&&this.logger.warning("WsStore setConnection() overwriting existing open connection: ",this.getWs(e)),this.wsState[e]={subscribedTopics:new Set,connectionState:i.WsConnectionState.READY_STATE_INITIAL},this.get(e)}delete(e){if(this.hasExistingActiveConnection(e)){const t=this.getWs(e);this.logger.warning("WsStore deleting state for connection still open: ",t),null==t||t.close()}delete this.wsState[e]}hasExistingActiveConnection(e){return this.get(e)&&this.isWsOpen(e)}getWs(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.ws}setWs(e,t){return this.isWsOpen(e)&&this.logger.warning("WsStore setConnection() overwriting existing open connection: ",this.getWs(e)),this.get(e,!0).ws=t,t}isWsOpen(e){const t=this.getWs(e);return!!t&&t.readyState===t.OPEN}getConnectionState(e){return this.get(e,!0).connectionState}setConnectionState(e,t){this.get(e,!0).connectionState=t}isConnectionState(e,t){return this.getConnectionState(e)===t}isWsConnecting(e){return this.isConnectionState(e,i.WsConnectionState.READY_STATE_CONNECTING)||this.isConnectionState(e,i.WsConnectionState.READY_STATE_RECONNECTING)}getTopics(e){return this.get(e,!0).subscribedTopics}getTopicsByKey(){const e={};for(const t in this.wsState)e[t]=this.getTopics(t);return e}addTopic(e,t){return this.getTopics(e).add(t)}deleteTopic(e,t){return this.getTopics(e).delete(t)}}},249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.floatKeys=["accumulatedQuantity","accumulatedRealisedPreFee","asks","asksNotional","askPrice","askQty","availableBalance","averagePrice","balanceDelta","balances","balanceChange","baseAssetVolume","bestAskPrice","bestAskQuantity","bids","bidsNotional","bestBid","bestBidQuantity","bidPrice","bidQty","buyerCommission","close","closeQuantity","closeTime","commission","commissionAmount","crossWalletBalance","currentClose","cumulativeQuoteAssetTransactedQty","entryPrice","executedQty","free","freeze","fundingRate","high","highPrice","icebergQuantity","icebergQty","ignored","income","indexPrice","ipoable","ipoing","isolatedMargin","isolatedWallet","isolatedWalletAmount","lastFilledPrice","lastFilledQuantity","lastTradeQuantity","lastTradePrice","lastQuoteAssetTransactedQty","liquidationPrice","locked","low","maintenanceMarginRequired","makerCommission","markPrice","maxNotionalValue","maxPrice","maxQty","minNotional","minPrice","minQty","multiplierDown","multiplierUp","newTraderRebateCommission","notional","oldTraderRebateCommission","onOrderBalance","open","openPrice","orderQuoteQty","orderFilledAccumulatedQuantity","originalPrice","originalQuantity","origQty","positionAmount","positionAmt","previousClose","prevClosePrice","price","priceChange","priceChangePercent","quantity","qty","quoteAssetVolume","quoteVolume","quoteVolumeActive","realisedProfit","sellerCommission","settlePriceEstimate","stepSize","stopPrice","storage","takerBaseAssetVolume","takerCommission","takerQuoteAssetVolume","tickSize","totalRebateVol","totalTradeVol","trailingStopActivationPrice","trailingStopCallbackRate","unrealisedPnl","unRealizedProfit","volume","volumeActive","walletBalance","weightedAveragePrice","weightedAvgPrice","withdrawFee","withdrawMax","withdrawMin","withdrawIntegerMultiple","withdrawing"],this.floatKeysHashMap={},this.floatKeys.forEach((e=>{this.floatKeysHashMap[e]=!0})),this.beautificationMap={aggTrades:{a:"aggTradeId",p:"price",q:"quantity",f:"firstTradeId",l:"lastTradeId",T:"timestamp",m:"maker",M:"bestPriceMatch"},bookTickerEvent:{e:"eventType",u:"updateId",s:"symbol",b:"bidPrice",B:"bidQty",a:"askPrice",A:"askQty"},klines:{0:"openTime",1:"open",2:"high",3:"low",4:"close",5:"volume",6:"closeTime",7:"quoteAssetVolume",8:"trades",9:"takerBaseAssetVolume",10:"takerQuoteAssetVolume",11:"ignored"},bids:[{0:"price",1:"quantity",2:"ignored"}],asks:[{0:"price",1:"quantity",2:"ignored"}],depthUpdateEvent:{e:"eventType",E:"eventTime",s:"symbol",U:"firstUpdateId",u:"lastUpdateId",b:"bidDepthDelta",a:"askDepthDelta"},bidDepthDelta:[{0:"price",1:"quantity",2:"ignored"}],askDepthDelta:[{0:"price",1:"quantity",2:"ignored"}],klineEvent:{e:"eventType",E:"eventTime",s:"symbol",k:"kline"},continuous_klineEvent:{e:"eventType",E:"eventTime",ps:"symbol",ct:"contractType",k:"kline"},indexPrice_klineEvent:{e:"eventType",E:"eventTime",ps:"symbol",k:"kline"},kline:{t:"startTime",T:"endTime",s:"symbol",i:"interval",f:"firstTradeId",L:"lastTradeId",o:"open",c:"close",h:"high",l:"low",v:"volume",n:"trades",x:"final",q:"quoteVolume",V:"volumeActive",Q:"quoteVolumeActive",B:"ignored"},aggTradeEvent:{e:"eventType",E:"eventTime",s:"symbol",a:"tradeId",p:"price",q:"quantity",f:"firstTradeId",l:"lastTradeId",T:"time",m:"maker",M:"ignored"},outboundAccountInfoEvent:{e:"eventType",E:"eventTime",m:"makerCommission",t:"takerCommission",b:"buyerCommission",s:"sellerCommission",T:"canTrade",W:"canWithdraw",D:"canDeposit",B:"balances",u:"lastUpdateTime"},outboundAccountPositionEvent:{e:"eventType",E:"eventTime",u:"lastUpdateTime",B:"balances"},balanceUpdateEvent:{e:"eventType",E:"eventTime",a:"asset",d:"balanceDelta",T:"clearTime"},indexPriceUpdateEvent:{e:"eventType",E:"eventTime",i:"symbol",p:"indexPrice"},listStatusEvent:{e:"eventType",E:"eventTime",s:"symbol",g:"orderListId",c:"contingencyType",l:"listStatusType",L:"listOrderStatus",r:"listRejectReason",C:"listClientOrderId",T:"transactionTime",O:"orders"},markPriceUpdateEvent:{e:"eventType",E:"eventTime",s:"symbol",p:"markPrice",i:"indexPrice",P:"settlePriceEstimate",r:"fundingRate",T:"nextFundingTime"},orders:[{s:"symbol",i:"orderId",c:"clientOrderId"}],ACCOUNT_UPDATEEvent:{e:"eventType",E:"eventTime",T:"transactionId",a:"updateData"},MARGIN_CALLEvent:{e:"eventType",E:"eventTime",cw:"crossWalletBalance",p:"positions"},ORDER_TRADE_UPDATEEvent:{e:"eventType",E:"eventTime",T:"transactionTime",o:"order"},order:{s:"symbol",c:"clientOrderId",S:"orderSide",o:"orderType",f:"timeInForce",q:"originalQuantity",p:"originalPrice",ap:"averagePrice",sp:"stopPrice",x:"executionType",X:"orderStatus",i:"orderId",l:"lastFilledQuantity",z:"orderFilledAccumulatedQuantity",L:"lastFilledPrice",N:"commissionAsset",n:"commissionAmount",T:"orderTradeTime",t:"tradeId",b:"bidsNotional",a:"asksNotional",m:"isMakerTrade",R:"isReduceOnly",wt:"stopPriceWorkingType",ot:"originalOrderType",ps:"positionSide",cp:"isCloseAll",AP:"trailingStopActivationPrice",cr:"trailingStopCallbackRate",rp:"realisedProfit"},ACCOUNT_CONFIG_UPDATEEvent:{e:"eventType",E:"eventTime",T:"transactionTime",ac:"assetConfiguration",ai:"accountConfiguration"},assetConfiguration:{s:"symbol",l:"leverage"},accountConfiguration:{j:"isMultiAssetsMode"},positions:[{s:"symbol",ps:"positionSide",pa:"positionAmount",mt:"marginType",iw:"isolatedWalletAmount",mp:"markPrice",up:"unrealisedPnl",mm:"maintenanceMarginRequired"}],listenKeyExpiredEvent:{e:"eventType",E:"eventTime"},updateData:{m:"updateEventType",P:"updatedPositions",B:"updatedBalances"},updatedBalances:[{a:"asset",wb:"walletBalance",cw:"crossWalletBalance",bc:"balanceChange"}],updatedPositions:[{s:"symbol",ma:"marginAsset",pa:"positionAmount",ep:"entryPrice",cr:"accumulatedRealisedPreFee",up:"unrealisedPnl",mt:"marginType",iw:"isolatedWalletAmount",ps:"positionSide"}],balances:[{a:"asset",f:"availableBalance",l:"onOrderBalance"}],executionReportEvent:{e:"eventType",E:"eventTime",s:"symbol",c:"newClientOrderId",S:"side",o:"orderType",f:"cancelType",q:"quantity",p:"price",P:"stopPrice",F:"icebergQuantity",g:"orderListId",C:"originalClientOrderId",x:"executionType",X:"orderStatus",r:"rejectReason",i:"orderId",l:"lastTradeQuantity",z:"accumulatedQuantity",L:"lastTradePrice",n:"commission",N:"commissionAsset",T:"tradeTime",t:"tradeId",I:"ignoreThis1",w:"isOrderOnBook",m:"isMaker",M:"ignoreThis2",O:"orderCreationTime",Z:"cumulativeQuoteAssetTransactedQty",Y:"lastQuoteAssetTransactedQty",Q:"orderQuoteQty"},tradeEvent:{e:"eventType",E:"eventTime",s:"symbol",t:"tradeId",p:"price",q:"quantity",b:"buyerOrderId",a:"sellerOrderId",T:"time",m:"maker",M:"ignored"},"24hrTickerEvent":{e:"eventType",E:"eventTime",s:"symbol",p:"priceChange",P:"priceChangePercent",w:"weightedAveragePrice",x:"previousClose",c:"currentClose",Q:"closeQuantity",b:"bestBid",B:"bestBidQuantity",a:"bestAskPrice",A:"bestAskQuantity",o:"open",h:"high",l:"low",v:"baseAssetVolume",q:"quoteAssetVolume",O:"openTime",C:"closeTime",F:"firstTradeId",L:"lastTradeId",n:"trades"},"24hrMiniTickerEvent":{e:"eventType",E:"eventTime",s:"symbol",ps:"contractSymbol",c:"close",o:"open",h:"high",l:"low",v:"baseAssetVolume",q:"quoteAssetVolume"},forceOrderEvent:{e:"eventType",E:"eventTime",o:"liquidationOrder"},liquidationOrder:{s:"symbol",S:"side",o:"orderType",f:"timeInForce",q:"quantity",p:"price",ap:"averagePrice",X:"orderStatus",l:"lastFilledQuantity",z:"orderFilledAccumulatedQuantity",T:"orderTradeTime"}}}beautifyValueWithKey(e,t){if("string"==typeof t&&this.floatKeysHashMap[e]&&""!==t){const e=parseFloat(t);return isNaN(e)?t:e}return t}beautifyObjectValues(e){if(Array.isArray(e))return this.beautifyArrayValues(e);const t={};for(const[r,i]of Object.entries(e)){const e=typeof i;Array.isArray(i)?t[r]=this.beautifyArrayValues(i,r):"e"===r&&"string"===e?t.eventType=this.beautifyValueWithKey(r,i):t[r]="object"===e?this.beautifyObjectValues(i):this.beautifyValueWithKey(r,i)}return t}beautifyArrayValues(e,t){const r=[];for(const[i,s]of e.entries()){const e=typeof s;Array.isArray(s)?r.push(this.beautifyArrayValues(s,t||i)):"string"===e||"number"===e||"boolean"===e?r.push(this.beautifyValueWithKey(t||i,s)):r.push(this.beautifyObjectValues(s))}return r}beautify(e,t){if("string"!=typeof t&&"number"!=typeof t)return console.warn(`beautify(object, ${t}) is not valid key - beautification failed `,e,t),e;const r=this.beautificationMap[t];if(!r)return Array.isArray(e)?this.beautifyArrayValues(e):"object"==typeof e&&null!==e?this.beautifyObjectValues(e):this.beautifyValueWithKey(t,e);const i={};for(const t in e){const s=e[t],n=typeof s;let o=r[t]||t;if(Array.isArray(o)&&(o=o[0]),!Array.isArray(s)){i[o]="object"===n&&null!==s?this.beautify(s,r[t]):this.beautifyValueWithKey(o,s);continue}const a=[];if(Array.isArray(this.beautificationMap[o]))for(const e of s){const i=this.beautificationMap[r[t]][0];if("object"!=typeof i||null===i)a.push(this.beautify(e,i));else{const t={};for(const r in e){const s=i[r]||r;t[s]=this.beautify(e[r],s)}a.push(t)}}i[o]=a}return i}beautifyWsMessage(e,t,r){return Array.isArray(e)?e.map((e=>e.e?this.beautify(e,e.e+"Event"):e)):e.e?this.beautify(e,e.e+"Event"):r&&"object"==typeof e&&null!==e?this.beautify(e,t):e}}},42:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.signMessage=void 0,t.signMessage=function(e,t){return r(this,void 0,void 0,(function*(){const r=new TextEncoder,i=yield window.crypto.subtle.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=yield window.crypto.subtle.sign("HMAC",i,r.encode(e));return Array.prototype.map.call(new Uint8Array(s),(e=>("00"+e.toString(16)).slice(-2))).join("")}))}},821:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.appendEventMarket=t.getWsKeyWithContext=t.getContextFromWsKey=t.appendEventIfMissing=t.logInvalidOrderId=t.isWsPong=t.isPublicEndpoint=t.getRestBaseUrl=t.getServerTimeEndpoint=t.getRequestSignature=t.serialiseParams=t.generateNewOrderId=t.getOrderIdPrefix=void 0;const s=r(42),n=r(434);function o(e){switch(e){case"spot":case"spot1":case"spot2":case"spot3":case"spot4":default:return"U5D79M5B";case"usdm":case"usdmtest":case"coinm":return"15PC4ZJy";case"voptions":case"voptionstest":return""}}function a(e={},t=!1,r=!1){return Object.keys(e).map((i=>{const s=e[i];if(!0===t&&void 0===s)throw new Error("Failed to sign API request due to undefined parameter");return`${i}=${r?encodeURIComponent(s):s}`})).join("&")}t.getOrderIdPrefix=o,t.generateNewOrderId=function(e){const t=n.nanoid(25);return"x-"+o(e)+t},t.serialiseParams=a,t.getRequestSignature=function(e,t,r,n,o,c){var u,l;return i(this,void 0,void 0,(function*(){const i=null!==(l=null!==(u=null==e?void 0:e.recvWindow)&&void 0!==u?u:n)&&void 0!==l?l:5e3;if(t&&r){const t=Object.assign(Object.assign({},e),{timestamp:o,recvWindow:i}),n=a(t,c,!0),u=yield s.signMessage(n,r);return t.signature=u,{requestBody:Object.assign({},e),serialisedParams:n,timestamp:o,signature:u,recvWindow:i}}return{requestBody:e,serialisedParams:void 0}}))};const c={spot:"https://api.binance.com",spot1:"https://api.binance.com",spot2:"https://api1.binance.com",spot3:"https://api2.binance.com",spot4:"https://api3.binance.com",usdm:"https://fapi.binance.com",usdmtest:"https://testnet.binancefuture.com",coinm:"https://dapi.binance.com",voptions:"https://vapi.binance.com",voptionstest:"https://testnet.binanceops.com"};function u(e){const[t,r,i,s,...n]=e.split("_");return{symbol:"undefined"===i?void 0:i,market:t,isTestnet:t.includes("estnet"),isUserData:e.includes("userData"),streamName:r,listenKey:"undefined"===s?void 0:s,otherParams:n}}t.getServerTimeEndpoint=function(e){switch(e){case"spot":case"spot1":case"spot2":case"spot3":case"spot4":default:return"api/v3/time";case"usdm":case"usdmtest":return"fapi/v1/time";case"coinm":return"dapi/v1/time";case"voptions":case"voptionstest":return"vapi/v1/time"}},t.getRestBaseUrl=function(e,t){return t.baseUrl?t.baseUrl:t.baseUrlKey?c[t.baseUrlKey]:c[e]},t.isPublicEndpoint=function(e){return!!e.startsWith("v2/public")||!!e.startsWith("public/linear")},t.isWsPong=function(e){return e.request&&"ping"===e.request.op&&"pong"===e.ret_msg&&!0===e.success},t.logInvalidOrderId=function(e,t,r){console.warn(`WARNING: '${e}' invalid - it should be prefixed with ${t}. Use the 'client.generateNewOrderId()' REST client utility method to generate a fresh order ID on demand. Original request: ${JSON.stringify(r)}`)},t.appendEventIfMissing=function(e,t){e.e||(-1===t.indexOf("bookTicker")?-1===t.indexOf("diffBookDepth")?-1===t.indexOf("partialBookDepth")&&-1===t.indexOf("depth")||(e.e="partialBookDepth"):e.e="diffBookDepth":e.e="bookTicker")},t.getContextFromWsKey=u,t.getWsKeyWithContext=function(e,t,r,i,...s){return[e,t,r,i,...s].join("_")},t.appendEventMarket=function(e,t){const{market:r}=u(t);e.wsMarket=r,e.wsKey=t}},581:(e,t)=>{"use strict";function r(e){return!Array.isArray(e)&&"markPriceUpdate"===e.eventType}function i(e){return Array.isArray(e)&&0!==e.length&&r(e[0])}function s(e){return!Array.isArray(e)&&"24hrTicker"===e.eventType}function n(e){return!Array.isArray(e)&&e.wsKey.includes("userData")}Object.defineProperty(t,"__esModule",{value:!0}),t.isAccountUpdateRaw=t.isAccountConfigUpdateRaw=t.isOrderTradeUpdateRaw=t.isKlineRaw=t.is24hrMiniTickerRaw=t.isAll24hrMiniTickerRaw=t.isWsFormattedFuturesUserDataEvent=t.isWsFormattedSpotUserDataEvent=t.isWsFormattedUserDataEvent=t.isWsFormatted24hrTickerArray=t.isWsFormatted24hrTicker=t.isWsFormattedKline=t.isWsFormattedMarkPriceUpdate=t.isWsFormattedMarkPriceUpdateArray=t.isWsFormattedMarkPriceUpdateEvent=void 0,t.isWsFormattedMarkPriceUpdateEvent=r,t.isWsFormattedMarkPriceUpdateArray=i,t.isWsFormattedMarkPriceUpdate=function(e){return i(e)},t.isWsFormattedKline=function(e){return!Array.isArray(e)&&"kline"===e.eventType},t.isWsFormatted24hrTicker=s,t.isWsFormatted24hrTickerArray=function(e){return Array.isArray(e)&&0!==e.length&&s(e[0])},t.isWsFormattedUserDataEvent=n,t.isWsFormattedSpotUserDataEvent=function(e){return n(e)&&e.wsMarket.includes("spot")},t.isWsFormattedFuturesUserDataEvent=function(e){return n(e)&&e.wsMarket.includes("usdm")},t.isAll24hrMiniTickerRaw=function(e){return Array.isArray(e)&&"24hrMiniTicker"===e[0].e},t.is24hrMiniTickerRaw=function(e){return!Array.isArray(e)&&"24hrMiniTicker"===e.e},t.isKlineRaw=function(e){return!Array.isArray(e)&&"kline"===e.e},t.isOrderTradeUpdateRaw=function(e){return!Array.isArray(e)&&"ORDER_TRADE_UPDATE"===e.e},t.isAccountConfigUpdateRaw=function(e){return!Array.isArray(e)&&"ACCOUNT_CONFIG_UPDATE"===e.e},t.isAccountUpdateRaw=function(e){return!Array.isArray(e)&&"ACCOUNT_UPDATE"===e.e}},182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminateWs=void 0,t.terminateWs=function(e){"function"==typeof(null==e?void 0:e.terminate)&&e.terminate()}},797:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketClient=t.parseRawWsMessage=t.WsConnectionState=void 0;const n=r(939),o=s(r(768)),a=r(753),c=r(327),u=r(574),l=s(r(249)),d=r(821),p=r(182),h=s(r(470)),g={spot:"wss://stream.binance.com:9443",margin:"wss://stream.binance.com:9443",isolatedMargin:"wss://stream.binance.com:9443",usdm:"wss://fstream.binance.com",usdmTestnet:"wss://stream.binancefuture.com",coinm:"wss://dstream.binance.com",coinmTestnet:"wss://dstream.binancefuture.com",options:"wss://vstream.binance.com",optionsTestnet:"wss://testnetws.binanceops.com"},f={category:"binance-ws"};function v(e,t){throw new Error(t)}function m(e){if("string"==typeof e){const t=JSON.parse(e);if(t.data)return"string"==typeof t.data?m(t.data):t.data}return(null==e?void 0:e.data)?JSON.parse(e.data):e}var y;(y=t.WsConnectionState||(t.WsConnectionState={}))[y.READY_STATE_INITIAL=0]="READY_STATE_INITIAL",y[y.READY_STATE_CONNECTING=1]="READY_STATE_CONNECTING",y[y.READY_STATE_CONNECTED=2]="READY_STATE_CONNECTED",y[y.READY_STATE_CLOSING=3]="READY_STATE_CLOSING",y[y.READY_STATE_RECONNECTING=4]="READY_STATE_RECONNECTING",t.parseRawWsMessage=m;class b extends n.EventEmitter{constructor(e,t){super(),this.logger=t||a.DefaultLogger,this.wsStore=new h.default(this.logger),this.beautifier=new l.default,this.restClients={},this.options=Object.assign({pongTimeout:7500,pingInterval:1e4,reconnectTimeout:500},e),this.listenKeyStateStore={},this.wsUrlKeyMap={}}getRestClientOptions(){return Object.assign(Object.assign(Object.assign({},this.options),this.options.restOptions),{api_key:this.options.api_key,api_secret:this.options.api_secret})}connectToWsUrl(e,t,r){const i=t||e,s=this.wsStore.getWs(i);if(s&&this.wsStore.isWsOpen(i)&&!r)return this.logger.silly("connectToWsUrl(): Returning existing open WS connection",Object.assign(Object.assign({},f),{wsRefKey:i})),s;this.logger.silly(`connectToWsUrl(): Opening WS connection to URL: ${e}`,Object.assign(Object.assign({},f),{wsRefKey:i}));const n=new o.default(e);return this.wsUrlKeyMap[e]=i,"function"==typeof n.on&&(n.on("ping",(e=>this.onWsPing(e,i,n,"event"))),n.on("pong",(e=>this.onWsPong(e,i,"event")))),n.onopen=t=>this.onWsOpen(t,i,e),n.onerror=e=>this.onWsError(e,i,n),n.onclose=t=>this.onWsClose(t,i,n,e),n.onmessage=e=>this.onWsMessage(e,i,"function"),n.onping=e=>this.onWsPing(e,i,n,"function"),n.onpong=e=>this.onWsPong(e,i,"function"),this.wsStore.setWs(i,n),n}tryWsSend(e,t){try{if(this.logger.silly("Sending upstream ws message: ",Object.assign(Object.assign({},f),{wsMessage:t,wsKey:e})),!e)throw new Error("No wsKey provided");const r=this.getWs(e);if(!r)throw new Error(`No active websocket connection exists for wsKey: ${e}`);r.send(t)}catch(r){this.logger.error("Failed to send WS message",Object.assign(Object.assign({},f),{wsMessage:t,wsKey:e,exception:r}))}}tryWsPing(e){try{if(!e)throw new Error("No wsKey provided");const t=this.getWs(e);if(!t)throw new Error(`No active websocket connection exists for wsKey: ${e}`);t.ping(),t.pong()}catch(t){this.logger.error("Failed to send WS ping",Object.assign(Object.assign({},f),{wsKey:e,exception:t}))}}onWsOpen(e,t,r){this.logger.silly(`onWsOpen(): ${r} : ${t}`),this.wsStore.isConnectionState(t,4)?(this.logger.info("Websocket reconnected",Object.assign(Object.assign({},f),{wsKey:t})),this.emit("reconnected",{wsKey:t,ws:e})):(this.logger.info("Websocket connected",Object.assign(Object.assign({},f),{wsKey:t})),this.emit("open",{wsKey:t,ws:e})),this.setWsState(t,2);const i=[...this.wsStore.getTopics(t)];if(i.length&&this.requestSubscribeTopics(t,i),!this.options.disableHeartbeat){const e=this.wsStore.get(t,!0);e.activePingTimer&&clearInterval(e.activePingTimer),e.activePingTimer=setInterval((()=>this.sendPing(t)),this.options.pingInterval)}}onWsError(e,t,r){this.logger.error("Websocket error",Object.assign(Object.assign({},f),{wsKey:t,error:e})),this.parseWsError("Websocket error",e,t),this.wsStore.isConnectionState(t,2)&&this.emit("error",{error:e,wsKey:t,ws:r})}onWsClose(e,t,r,i){const s=this.wsStore.getConnectionState(t);this.logger.info("Websocket connection closed",Object.assign(Object.assign({},f),{wsKey:t,event:e,wsConnectionState:s}));const{isUserData:n}=d.getContextFromWsKey(t);n&&this.wsStore.delete(t),3!==s?(this.reconnectWithDelay(t,this.options.reconnectTimeout,i),this.emit("reconnecting",{wsKey:t,event:e,ws:r})):(this.setWsState(t,0),this.emit("close",{wsKey:t,event:e,ws:r}))}onWsMessage(e,t,r){try{this.clearPongTimer(t);const n=m(e);d.appendEventIfMissing(n,t),d.appendEventMarket(n,t);const o=(null==(i=n)?void 0:i.e)?i.e:Array.isArray(i)&&i.length?null===(s=i[0])||void 0===s?void 0:s.e:void 0;if(o){if(this.emit("message",n),"listenKeyExpired"===o){const{market:e}=d.getContextFromWsKey(t);this.logger.info(`${e} listenKey expired - attempting to respawn user data stream: ${t}`),this.close(t,!0)}if(this.options.beautify){const e=this.beautifier.beautifyWsMessage(n,o,!1);this.emit("formattedMessage",e),Array.isArray(e)||["outboundAccountPosition","balanceUpdate","executionReport","listStatus","listenKeyExpired","MARGIN_CALL","ORDER_TRADE_UPDATE","ACCOUNT_UPDATE","ORDER_TRADE_UPDATE","ACCOUNT_CONFIG_UPDATE"].includes(o)&&this.emit("formattedUserDataMessage",e)}return}if(void 0!==n.result)return void this.emit("reply",{type:e.type,data:n,wsKey:t});this.logger.warning("Bug? Unhandled ws message event type. Check if appendEventIfMissing needs to parse wsKey.",Object.assign(Object.assign({},f),{parsedMessage:JSON.stringify(n),rawEvent:e,wsKey:t,source:r}))}catch(i){this.logger.error("Exception parsing ws message: ",Object.assign(Object.assign({},f),{rawEvent:e,wsKey:t,error:i,source:r})),this.emit("error",{wsKey:t,error:i,rawEvent:e,source:r})}var i,s}sendPing(e){this.clearPongTimer(e),this.logger.silly("Sending ping",Object.assign(Object.assign({},f),{wsKey:e})),this.tryWsPing(e),this.wsStore.get(e,!0).activePongTimer=setTimeout((()=>{this.logger.info("Pong timeout - closing socket to reconnect",Object.assign(Object.assign({},f),{wsKey:e})),this.close(e,!0)}),this.options.pongTimeout)}onWsPing(e,t,r,i){this.logger.silly("Received ping, sending pong frame",Object.assign(Object.assign({},f),{wsKey:t,event:e,source:i})),r.pong()}onWsPong(e,t,r){this.logger.silly("Received pong, clearing pong timer",Object.assign(Object.assign({},f),{wsKey:t,event:e,source:r})),this.clearPongTimer(t)}close(e,t){var r;this.logger.info("Closing connection",Object.assign(Object.assign({},f),{wsKey:e})),this.setWsState(e,t?4:3),this.clearTimers(e),null===(r=this.getWs(e))||void 0===r||r.close(),p.terminateWs(this.getWs(e))}closeWs(e,t){const r=this.wsUrlKeyMap[e.url];if(!r)throw new Error("Cannot close websocket as it has no known wsKey attached.");return this.close(r,t)}parseWsError(e,t,r){t.message?"Unexpected server response: 401"===t.message?this.logger.error(`${e} due to 401 authorization failure.`,Object.assign(Object.assign({},f),{wsKey:r})):this.logger.error(`${e} due to unexpected response error: ${t.msg||t.message||t}`,Object.assign(Object.assign({},f),{wsKey:r,error:t})):this.logger.error(`${e} due to unexpected error: `,t)}reconnectWithDelay(e,t,r){this.clearTimers(e),1!==this.wsStore.getConnectionState(e)&&this.setWsState(e,4),this.logger.info("Reconnecting to websocket with delay...",Object.assign(Object.assign({},f),{wsKey:e,connectionDelayMs:t})),setTimeout((()=>{if(e.includes("userData")){const{market:t,symbol:r,isTestnet:i}=d.getContextFromWsKey(e);return this.logger.info("Reconnecting to user data stream",Object.assign(Object.assign({},f),{wsKey:e,market:t,symbol:r})),this.wsStore.delete(e),void this.respawnUserDataStream(t,r,i)}this.logger.info("Reconnecting to public websocket",Object.assign(Object.assign({},f),{wsKey:e,wsUrl:r})),this.connectToWsUrl(r,e)}),t)}clearTimers(e){this.clearPingTimer(e),this.clearPongTimer(e)}clearPingTimer(e){const t=this.wsStore.get(e);(null==t?void 0:t.activePingTimer)&&(clearInterval(t.activePingTimer),t.activePingTimer=void 0)}clearPongTimer(e){const t=this.wsStore.get(e);(null==t?void 0:t.activePongTimer)&&(clearTimeout(t.activePongTimer),t.activePongTimer=void 0)}getWsBaseUrl(e,t){return this.options.wsUrl?this.options.wsUrl:g[e]}getWs(e){return this.wsStore.getWs(e)}setWsState(e,t){this.wsStore.setConnectionState(e,t)}getSpotRestClient(){return this.restClients.spot||(this.restClients.spot=new c.MainClient(this.getRestClientOptions(),this.options.requestOptions)),this.restClients.spot}getUSDMRestClient(e){return e?(this.restClients.usdmFuturesTestnet||(this.restClients.usdmFuturesTestnet=new u.USDMClient(this.getRestClientOptions(),this.options.requestOptions,e)),this.restClients.usdmFuturesTestnet):(this.restClients.usdmFutures||(this.restClients.usdmFutures=new u.USDMClient(this.getRestClientOptions(),this.options.requestOptions)),this.restClients.usdmFutures)}requestSubscribeTopics(e,t){const r=JSON.stringify({method:"SUBSCRIBE",params:t,id:(new Date).getTime()});this.tryWsSend(e,r)}requestUnsubscribeTopics(e,t){const r=JSON.stringify({op:"UNSUBSCRIBE",params:t,id:(new Date).getTime()});this.tryWsSend(e,r)}requestListSubscriptions(e,t){const r=JSON.stringify({method:"LIST_SUBSCRIPTIONS",id:t});this.tryWsSend(e,r)}requestSetProperty(e,t,r,i){const s=JSON.stringify({method:"SET_PROPERTY",params:[t,r],id:i});this.tryWsSend(e,s)}requestGetProperty(e,t,r){const i=JSON.stringify({method:"GET_PROPERTY",params:[t],id:r});this.tryWsSend(e,i)}getListenKeyState(e,t){return this.listenKeyStateStore[e]||(this.listenKeyStateStore[e]={market:t,lastKeepAlive:0,keepAliveTimer:void 0,keepAliveFailures:0},this.listenKeyStateStore[e])}setKeepAliveListenKeyTimer(e,t,r,i,s,n){const o=this.getListenKeyState(e,t);o.keepAliveTimer&&clearInterval(o.keepAliveTimer),o.keepAliveTimer=setInterval((()=>this.checkKeepAliveListenKey(e,t,r,i,s,n)),3e6)}sendKeepAliveForMarket(e,t,r,i,s,n){switch(t){case"spot":return this.getSpotRestClient().keepAliveSpotUserDataListenKey(e);case"margin":return this.getSpotRestClient().keepAliveMarginUserDataListenKey(e);case"isolatedMargin":return this.getSpotRestClient().keepAliveIsolatedMarginUserDataListenKey({listenKey:e,symbol:s});case"coinm":case"coinmTestnet":case"options":case"optionsTestnet":case"usdm":return this.getUSDMRestClient().keepAliveFuturesUserDataListenKey();case"usdmTestnet":return this.getUSDMRestClient(n).keepAliveFuturesUserDataListenKey();default:v(0,`Failed to send keep alive for user data stream in unhandled market ${t}`)}}checkKeepAliveListenKey(e,t,r,s,n,o){return i(this,void 0,void 0,(function*(){const i=this.getListenKeyState(e,t);try{yield this.sendKeepAliveForMarket(e,t,r,s,n,o),i.lastKeepAlive=Date.now(),i.keepAliveFailures=0,this.logger.info(`Completed keep alive cycle for listenKey(${e}) in market(${t})`,Object.assign(Object.assign({},f),{listenKey:e}))}catch(o){if(i.keepAliveFailures++,i.keepAliveFailures>=3)return this.logger.error("FATAL: Failed to keep WS alive for listen key after 3 attempts",Object.assign(Object.assign({},f),{listenKey:e,error:o})),this.teardownUserDataListenKey(e,t,r),void this.respawnUserDataStream(t,n);this.logger.warning("User key refresh failed due to error, trying again with short delay",Object.assign(Object.assign({},f),{listenKey:e,error:o,keepAliveAttempts:i.keepAliveFailures})),setTimeout((()=>this.checkKeepAliveListenKey(e,t,r,s,n)),15e3)}}))}teardownUserDataListenKey(e,t,r){const i=this.getListenKeyState(e,t);clearInterval(i.keepAliveFailures),p.terminateWs(r),delete this.listenKeyStateStore[e]}respawnUserDataStream(e,t,r,s){return i(this,void 0,void 0,(function*(){const i=!0,n=!0;let o;try{switch(e){case"spot":o=yield this.subscribeSpotUserDataStream(i,n);break;case"margin":o=yield this.subscribeMarginUserDataStream(i,n);break;case"isolatedMargin":o=yield this.subscribeIsolatedMarginUserDataStream(t,i,n);break;case"usdm":o=yield this.subscribeUsdFuturesUserDataStream(r,i,n);break;case"usdmTestnet":o=yield this.subscribeUsdFuturesUserDataStream(!0,i,n);break;case"coinm":case"coinmTestnet":case"options":case"optionsTestnet":throw new Error("TODO: respawn other user data streams once subscribe methods have been aded");default:v(0,`Failed to respawn user data stream - unhandled market: ${e}`)}}catch(i){this.logger.error("Exception trying to spawn user data stream",Object.assign(Object.assign({},f),{market:e,symbol:t,isTestnet:r,error:i})),this.emit("error",{wsKey:e+"_userData",error:i})}if(!o){const i=2;this.logger.error("User key respawn failed, trying again with short delay",Object.assign(Object.assign({},f),{market:e,symbol:t,isTestnet:r,respawnAttempt:s,delayInSeconds:i})),setTimeout((()=>this.respawnUserDataStream(e,t,r,s?s+1:1)),1e3*i)}}))}subscribeAggregateTrades(e,t,r){const i=e.toLowerCase(),s=d.getWsKeyWithContext(t,"aggTrade",i);return this.connectToWsUrl(this.getWsBaseUrl(t,s)+`/ws/${i}@aggTrade`,s,r)}subscribeCoinIndexPrice(e,t=3e3,r){const i=e.toLowerCase(),s=1e3===t?"@1s":"",n="coinm",o=d.getWsKeyWithContext(n,"indexPrice",i);return this.connectToWsUrl(this.getWsBaseUrl(n,o)+`/ws/${i}@indexPrice${s}`,o,r)}subscribeMarkPrice(e,t,r=3e3,i){const s=e.toLowerCase(),n=1e3===r?"@1s":"",o=d.getWsKeyWithContext(t,"markPrice",s);return this.connectToWsUrl(this.getWsBaseUrl(t,o)+`/ws/${s}@markPrice${n}`,o,i)}subscribeAllMarketMarkPrice(e,t=3e3,r){const i="!markPrice@arr",s=1e3===t?"@1s":"",n=d.getWsKeyWithContext(e,i);return this.connectToWsUrl(this.getWsBaseUrl(e,n)+`/ws/${i}${s}`,n,r)}subscribeKlines(e,t,r,i){const s=e.toLowerCase(),n=d.getWsKeyWithContext(r,"kline",s,t);return this.connectToWsUrl(this.getWsBaseUrl(r,n)+`/ws/${s}@kline_${t}`,n,i)}subscribeContinuousContractKlines(e,t,r,i,s){const n=e.toLowerCase(),o="continuousKline",a=d.getWsKeyWithContext(i,o,n,r);return this.connectToWsUrl(this.getWsBaseUrl(i,a)+`/ws/${n}_${t}@${o}_${r}`,a,s)}subscribeIndexKlines(e,t,r){const i=e.toLowerCase(),s="indexPriceKline",n="coinm",o=d.getWsKeyWithContext(n,s,i,t);return this.connectToWsUrl(this.getWsBaseUrl(n,o)+`/ws/${i}@${s}_${t}`,o,r)}subscribeMarkPriceKlines(e,t,r){const i=e.toLowerCase(),s="markPrice_kline",n="coinm",o=d.getWsKeyWithContext(n,s,i,t);return this.connectToWsUrl(this.getWsBaseUrl(n,o)+`/ws/${i}@${s}_${t}`,o,r)}subscribeSymbolMini24hrTicker(e,t,r){const i=e.toLowerCase(),s=d.getWsKeyWithContext(t,"miniTicker",i);return this.connectToWsUrl(this.getWsBaseUrl(t,s)+`/ws/${i}@miniTicker`,s,r)}subscribeAllMini24hrTickers(e,t){const r=d.getWsKeyWithContext(e,"miniTicker");return this.connectToWsUrl(this.getWsBaseUrl(e,r)+"/ws/!miniTicker@arr",r,t)}subscribeSymbol24hrTicker(e,t,r){const i=e.toLowerCase(),s=d.getWsKeyWithContext(t,"ticker",i);return this.connectToWsUrl(this.getWsBaseUrl(t,s)+`/ws/${i}@ticker`,s,r)}subscribeAll24hrTickers(e,t){const r=d.getWsKeyWithContext(e,"ticker");return this.connectToWsUrl(this.getWsBaseUrl(e,r)+"/ws/!ticker@arr",r,t)}subscribeSymbolBookTicker(e,t,r){const i=e.toLowerCase(),s=d.getWsKeyWithContext(t,"bookTicker",i);return this.connectToWsUrl(this.getWsBaseUrl(t,s)+`/ws/${i}@bookTicker`,s,r)}subscribeAllBookTickers(e,t){const r=d.getWsKeyWithContext(e,"bookTicker");return this.connectToWsUrl(this.getWsBaseUrl(e,r)+"/ws/!bookTicker",r,t)}subscribeSymbolLiquidationOrders(e,t,r){const i=e.toLowerCase(),s=d.getWsKeyWithContext(t,"forceOrder",i);return this.connectToWsUrl(this.getWsBaseUrl(t,s)+`/ws/${i}@forceOrder`,s,r)}subscribeAllLiquidationOrders(e,t){const r="forceOrder@arr",i=d.getWsKeyWithContext(e,r);return this.connectToWsUrl(this.getWsBaseUrl(e,i)+`/ws/!${r}`,i,t)}subscribePartialBookDepths(e,t,r,i,s){const n=e.toLowerCase(),o=d.getWsKeyWithContext(i,"depth",n),a=100===r?`@${r}ms`:"";return this.connectToWsUrl(this.getWsBaseUrl(i,o)+`/ws/${n}@depth${t}${a}`,o,s)}subscribeDiffBookDepth(e,t=1e3,r,i){const s=e.toLowerCase(),n=d.getWsKeyWithContext(r,"diffBookDepth",s,String(t)),o=100===t?`@${t}ms`:"";return this.connectToWsUrl(this.getWsBaseUrl(r,n)+`/ws/${s}@depth${o}`,n,i)}subscribeSpotAggregateTrades(e,t){return this.subscribeAggregateTrades(e,"spot",t)}subscribeSpotTrades(e,t){const r=e.toLowerCase(),i="spot",s=d.getWsKeyWithContext(i,"trade",r);return this.connectToWsUrl(this.getWsBaseUrl(i,s)+`/ws/${r}@trade`,s,t)}subscribeSpotKline(e,t,r){return this.subscribeKlines(e,t,"spot",r)}subscribeSpotSymbolMini24hrTicker(e,t){return this.subscribeSymbolMini24hrTicker(e,"spot",t)}subscribeSpotAllMini24hrTickers(e){return this.subscribeAllMini24hrTickers("spot",e)}subscribeSpotSymbol24hrTicker(e,t){return this.subscribeSymbol24hrTicker(e,"spot",t)}subscribeSpotAll24hrTickers(e){return this.subscribeAll24hrTickers("spot",e)}subscribeSpotSymbolBookTicker(e,t){return this.subscribeSymbolBookTicker(e,"spot",t)}subscribeSpotAllBookTickers(e){return this.subscribeAllBookTickers("spot",e)}subscribeSpotPartialBookDepth(e,t,r=1e3,i){return this.subscribePartialBookDepths(e,t,r,"spot",i)}subscribeSpotDiffBookDepth(e,t=1e3,r){return this.subscribeDiffBookDepth(e,t,"spot",r)}subscribeSpotUserDataStreamWithListenKey(e,t,r){const i="spot",s=d.getWsKeyWithContext(i,"userData",void 0,e);if(!t&&this.wsStore.isWsConnecting(s))return this.logger.silly("Existing spot user data connection in progress for listen key. Avoiding duplicate"),this.getWs(s);this.setWsState(s,r?4:1);const n=this.connectToWsUrl(this.getWsBaseUrl(i,s)+`/ws/${e}`,s,t);return this.setKeepAliveListenKeyTimer(e,i,n,s),n}subscribeSpotUserDataStream(e,t){return i(this,void 0,void 0,(function*(){try{const{listenKey:r}=yield this.getSpotRestClient().getSpotUserDataListenKey();return this.subscribeSpotUserDataStreamWithListenKey(r,e,t)}catch(e){this.logger.error("Failed to connect to spot user data",Object.assign(Object.assign({},f),{error:e})),this.emit("error",{wsKey:"spot_userData",error:e})}}))}subscribeMarginUserDataStream(e,t){return i(this,void 0,void 0,(function*(){try{const{listenKey:r}=yield this.getSpotRestClient().getMarginUserDataListenKey(),i="margin",s=d.getWsKeyWithContext(i,"userData",void 0,r);if(!e&&this.wsStore.isWsConnecting(s))return this.logger.silly("Existing margin user data connection in progress for listen key. Avoiding duplicate"),this.getWs(s);this.setWsState(s,t?4:1);const n=this.connectToWsUrl(this.getWsBaseUrl(i,s)+`/ws/${r}`,s,e);return this.setKeepAliveListenKeyTimer(r,i,n,s),n}catch(e){this.logger.error("Failed to connect to margin user data",Object.assign(Object.assign({},f),{error:e})),this.emit("error",{wsKey:"margin_userData",error:e})}}))}subscribeIsolatedMarginUserDataStream(e,t,r){return i(this,void 0,void 0,(function*(){try{const i=e.toLowerCase(),{listenKey:s}=yield this.getSpotRestClient().getIsolatedMarginUserDataListenKey({symbol:i}),n="isolatedMargin",o=d.getWsKeyWithContext(n,"userData",i,s);if(!t&&this.wsStore.isWsConnecting(o))return this.logger.silly("Existing isolated margin user data connection in progress for listen key. Avoiding duplicate"),this.getWs(o);this.setWsState(o,r?4:1);const a=this.connectToWsUrl(this.getWsBaseUrl(n,o)+`/ws/${s}`,o,t);return this.setKeepAliveListenKeyTimer(s,n,a,o,e),a}catch(t){this.logger.error("Failed to connect to isolated margin user data",Object.assign(Object.assign({},f),{error:t,symbol:e})),this.emit("error",{wsKey:"isolatedMargin_userData",error:t})}}))}subscribeUsdFuturesUserDataStream(e,t,r){return i(this,void 0,void 0,(function*(){try{const i=this.getUSDMRestClient(e),{listenKey:s}=yield i.getFuturesUserDataListenKey(),n=e?"usdmTestnet":"usdm",o=[n,"userData",s].join("_");if(!t&&this.wsStore.isWsConnecting(o))return this.logger.silly("Existing usd futures user data connection in progress for listen key. Avoiding duplicate"),this.getWs(o);this.setWsState(o,r?4:1);const a=this.connectToWsUrl(this.getWsBaseUrl(n,o)+`/ws/${s}`,o,t);return this.setKeepAliveListenKeyTimer(s,n,a,o,void 0,e),a}catch(e){this.logger.error("Failed to connect to USD Futures user data",Object.assign(Object.assign({},f),{error:e})),this.emit("error",{wsKey:"usdm_userData",error:e})}}))}}t.WebsocketClient=b},868:(e,t,r)=>{e.exports=r(867)},155:(e,t,r)=>{"use strict";var i=r(30),s=r(79),n=r(687),o=r(512),a=r(791),c=r(924),u=r(903),l=r(971);e.exports=function(e){return new Promise((function(t,r){var d=e.data,p=e.headers,h=e.responseType;i.isFormData(d)&&delete p["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(f+":"+v)}var m=a(e.baseURL,e.url);function y(){if(g){var i="getAllResponseHeaders"in g?c(g.getAllResponseHeaders()):null,n={data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:i,config:e,request:g};s(t,r,n),g=null}}if(g.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(r(l("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){r(l("Network Error",e,null,g)),g=null},g.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},i.isStandardBrowserEnv()){var b=(e.withCredentials||u(m))&&e.xsrfCookieName?n.read(e.xsrfCookieName):void 0;b&&(p[e.xsrfHeaderName]=b)}"setRequestHeader"in g&&i.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:g.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),h&&"json"!==h&&(g.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){g&&(g.abort(),r(e),g=null)})),d||(d=null),g.send(d)}))}},867:(e,t,r)=>{"use strict";var i=r(30),s=r(843),n=r(891),o=r(316);function a(e){var t=new n(e),r=s(n.prototype.request,t);return i.extend(r,n.prototype,t),i.extend(r,t),r}var c=a(r(457));c.Axios=n,c.create=function(e){return a(o(c.defaults,e))},c.Cancel=r(266),c.CancelToken=r(747),c.isCancel=r(416),c.all=function(e){return Promise.all(e)},c.spread=r(545),c.isAxiosError=r(232),e.exports=c,e.exports.default=c},266:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},747:(e,t,r)=>{"use strict";var i=r(266);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new i(e),t(r.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},416:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},891:(e,t,r)=>{"use strict";var i=r(30),s=r(512),n=r(36),o=r(884),a=r(316),c=r(84),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new n,response:new n}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var s,n=[];if(this.interceptors.response.forEach((function(e){n.push(e.fulfilled,e.rejected)})),!i){var l=[o,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(n),s=Promise.resolve(e);l.length;)s=s.then(l.shift(),l.shift());return s}for(var d=e;r.length;){var p=r.shift(),h=r.shift();try{d=p(d)}catch(e){h(e);break}}try{s=o(d)}catch(e){return Promise.reject(e)}for(;n.length;)s=s.then(n.shift(),n.shift());return s},l.prototype.getUri=function(e){return e=a(this.defaults,e),s(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,r,i){return this.request(a(i||{},{method:e,url:t,data:r}))}})),e.exports=l},36:(e,t,r)=>{"use strict";var i=r(30);function s(){this.handlers=[]}s.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},791:(e,t,r)=>{"use strict";var i=r(957),s=r(50);e.exports=function(e,t){return e&&!i(t)?s(e,t):t}},971:(e,t,r)=>{"use strict";var i=r(136);e.exports=function(e,t,r,s,n){var o=new Error(e);return i(o,t,r,s,n)}},884:(e,t,r)=>{"use strict";var i=r(30),s=r(630),n=r(416),o=r(457);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=s.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return a(e),t.data=s.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return n(t)||(a(e),t&&t.response&&(t.response.data=s.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},136:e=>{"use strict";e.exports=function(e,t,r,i,s){return e.config=t,r&&(e.code=r),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},316:(e,t,r)=>{"use strict";var i=r(30);e.exports=function(e,t){t=t||{};var r={},s=["url","method","data"],n=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function u(s){i.isUndefined(t[s])?i.isUndefined(e[s])||(r[s]=c(void 0,e[s])):r[s]=c(e[s],t[s])}i.forEach(s,(function(e){i.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),i.forEach(n,u),i.forEach(o,(function(s){i.isUndefined(t[s])?i.isUndefined(e[s])||(r[s]=c(void 0,e[s])):r[s]=c(void 0,t[s])})),i.forEach(a,(function(i){i in t?r[i]=c(e[i],t[i]):i in e&&(r[i]=c(void 0,e[i]))}));var l=s.concat(n).concat(o).concat(a),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return i.forEach(d,u),r}},79:(e,t,r)=>{"use strict";var i=r(971);e.exports=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(i("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},630:(e,t,r)=>{"use strict";var i=r(30),s=r(457);e.exports=function(e,t,r){var n=this||s;return i.forEach(r,(function(r){e=r.call(n,e,t)})),e}},457:(e,t,r)=>{"use strict";var i=r(30),s=r(122),n=r(136),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=r(155)),c),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,r){if(i.isString(e))try{return(0,JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||s&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw n(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(o)})),e.exports=u},843:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return e.apply(t,r)}}},512:(e,t,r)=>{"use strict";var i=r(30);function s(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(i.isURLSearchParams(t))n=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(s(t)+"="+s(e))})))})),n=o.join("&")}if(n){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}},50:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},687:(e,t,r)=>{"use strict";var i=r(30);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,r,s,n,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),i.isString(s)&&a.push("path="+s),i.isString(n)&&a.push("domain="+n),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},957:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},232:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},903:(e,t,r)=>{"use strict";var i=r(30);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function s(e){var i=e;return t&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=s(window.location.href),function(t){var r=i.isString(t)?s(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},122:(e,t,r)=>{"use strict";var i=r(30);e.exports=function(e,t){i.forEach(e,(function(r,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[i])}))}},924:(e,t,r)=>{"use strict";var i=r(30),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,n,o={};return e?(i.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=i.trim(e.substr(0,n)).toLowerCase(),r=i.trim(e.substr(n+1)),t){if(o[t]&&s.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},545:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},84:(e,t,r)=>{"use strict";var i=r(696),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var n={},o=i.version.split(".");function a(e,t){for(var r=t?t.split("."):o,i=e.split("."),s=0;s<3;s++){if(r[s]>i[s])return!0;if(r[s]<i[s])return!1}return!1}s.transitional=function(e,t,r){var s=t&&a(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,i,a){if(!1===e)throw new Error(o(i," has been removed in "+t));return s&&!n[i]&&(n[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,a)}},e.exports={isOlderVersion:a,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var i=Object.keys(e),s=i.length;s-- >0;){var n=i[s],o=t[n];if(o){var a=e[n],c=void 0===a||o(a,n,e);if(!0!==c)throw new TypeError("option "+n+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+n)}},validators:s}},30:(e,t,r)=>{"use strict";var i=r(843),s=Object.prototype.toString;function n(e){return"[object Array]"===s.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==s.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===s.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,i){c(t[i])&&c(r)?t[i]=e(t[i],r):c(r)?t[i]=e({},r):n(r)?t[i]=r.slice():t[i]=r}for(var i=0,s=arguments.length;i<s;i++)l(arguments[i],r);return t},extend:function(e,t,r){return l(t,(function(t,s){e[s]=r&&"function"==typeof t?i(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},939:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise((function(r,i){function s(){void 0!==n&&e.removeListener("error",n),r([].slice.call(arguments))}var n;"error"!==t&&(n=function(r){e.removeListener(t,s),i(r)},e.once("error",n)),e.once(t,s)}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){var s,n,o,u;if(a(r),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),n=e._events),o=n[t]),void 0===o)o=n[t]=r,++e._eventsCount;else if("function"==typeof o?o=n[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(s=c(e))>0&&o.length>s&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=l.bind(i);return s.listener=r,i.wrapFn=s,s}function p(e,t,r){var i=e._events;if(void 0===i)return[];var s=i[t];return void 0===s?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(s):g(s,s.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return c(this)},n.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var s="error"===e,n=this._events;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,l=g(c,u);for(r=0;r<u;++r)i(l[r],this,t)}return!0},n.prototype.addListener=function(e,t){return u(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return u(this,e,t,!0)},n.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,i,s,n,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(s=-1,n=r.length-1;n>=0;n--)if(r[n]===t||r[n].listener===t){o=r[n].listener,s=n;break}if(s<0)return this;0===s?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,s),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var s,n=Object.keys(r);for(i=0;i<n.length;++i)"removeListener"!==(s=n[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},n.prototype.listeners=function(e){return p(this,e,!0)},n.prototype.rawListeners=function(e){return p(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},n.prototype.listenerCount=h,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},768:(e,t,r)=>{var i=null;"undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof MozWebSocket?i=MozWebSocket:void 0!==r.g?i=r.g.WebSocket||r.g.MozWebSocket:"undefined"!=typeof window?i=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),e.exports=i},434:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>o,customRandom:()=>n,nanoid:()=>a,random:()=>s,urlAlphabet:()=>i});let i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",s=e=>crypto.getRandomValues(new Uint8Array(e)),n=(e,t,r)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*i*t/e.length);return()=>{let n="";for(;;){let o=r(s),a=s;for(;a--;)if(n+=e[o[a]&i]||"",n.length===t)return n}}},o=(e,t)=>n(e,t,s),a=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let i=63&r[e];t+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return t}}},t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}return r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(856)})()}));
//# sourceMappingURL=binanceapi.map